<?xml version="1.0" encoding="UTF-8"?>

<?import com.jfoenix.controls.JFXButton?>
<?import com.jfoenix.controls.JFXComboBox?>
<?import com.jfoenix.controls.JFXToggleButton?>
<?import com.jfoenix.controls.JFXDatePicker?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane fx:id="rootScene" prefHeight="720.0" prefWidth="1280.0" stylesheets="@../css/styles.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.zyropos.DataOperatorController">
    <!-- Left Sidebar -->
    <left>
       <VBox fx:id="menuBar" prefWidth="240.0" styleClass="sidebar">
          <children>
             <!-- Logo Area -->
             <VBox alignment="CENTER" spacing="10" style="-fx-padding: 20 0 30 0;">
                 <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                    <image>
                       <Image url="@../../../../assets/ZyroPOS2.png" />
                    </image>
                 </ImageView>
                 <Label text="Data Operator" styleClass="h3" style="-fx-text-fill: white;"/>
             </VBox>
 
             <!-- Navigation -->
             <VBox spacing="5" VBox.vgrow="ALWAYS">
                 <JFXButton fx:id="btnDashboard" onAction="#showDashboard" prefWidth="Infinity" styleClass="nav-button" text="Dashboard" graphicTextGap="15">
                    <graphic>
                       <ImageView fitHeight="20.0" fitWidth="20.0" preserveRatio="true">
                          <Image url="@../../../../assets/home.png" />
                       </ImageView>
                    </graphic>
                 </JFXButton>

                 <JFXButton fx:id="btnAddVendor" onAction="#displayAV" prefWidth="Infinity" styleClass="nav-button" text="Add Vendor" graphicTextGap="15">
                    <graphic>
                       <ImageView fitHeight="20.0" fitWidth="20.0" preserveRatio="true">
                          <Image url="@../../../../assets/SuperAdmin/addBranch.png" />
                       </ImageView>
                    </graphic>
                 </JFXButton>
 
                 <JFXButton fx:id="btnViewVendors" onAction="#displayVV" prefWidth="Infinity" styleClass="nav-button" text="View Vendors" graphicTextGap="15">
                     <graphic>
                       <ImageView fitHeight="20.0" fitWidth="20.0" preserveRatio="true">
                          <Image url="@../../../../assets/view.png" />
                       </ImageView>
                    </graphic>
                 </JFXButton>
                 
                 <JFXButton fx:id="btnAddProduct" onAction="#displayP" prefWidth="Infinity" styleClass="nav-button" text="Add Product" graphicTextGap="15">
                    <graphic>
                       <ImageView fitHeight="20.0" fitWidth="20.0" preserveRatio="true">
                          <Image url="@../../../../assets/SuperAdmin/addBranch.png" />
                       </ImageView>
                    </graphic>
                 </JFXButton>
                 
                 <JFXButton fx:id="btnViewProducts" onAction="#dislayVP" prefWidth="Infinity" styleClass="nav-button" text="View Products" graphicTextGap="15">
                     <graphic>
                       <ImageView fitHeight="20.0" fitWidth="20.0" preserveRatio="true">
                          <Image url="@../../../../assets/view.png" />
                       </ImageView>
                    </graphic>
                 </JFXButton>
 
                 <JFXButton fx:id="btnCP" onAction="#displayCP" prefWidth="Infinity" styleClass="nav-button" text="Change Password" graphicTextGap="15">
                    <graphic>
                       <ImageView fitHeight="20.0" fitWidth="20.0" preserveRatio="true">
                          <Image url="@../../../../assets/changePassword.png" />
                       </ImageView>
                    </graphic>
                 </JFXButton>
             </VBox>
             
             <!-- Bottom Actions -->
             <JFXButton fx:id="btnLogout" onAction="#handleLogout" prefWidth="Infinity" styleClass="nav-button" text="Logout" graphicTextGap="15" style="-fx-text-fill: #ef4444;">
                <graphic>
                   <ImageView fitHeight="20.0" fitWidth="20.0" preserveRatio="true">
                      <Image url="@../../../../assets/SuperAdmin/logout.png" />
                   </ImageView>
                </graphic>
             </JFXButton>
          </children>
       </VBox>
    </left>
 
    <!-- Main Content -->
    <center>
       <StackPane style="-fx-background-color: -fx-background; -fx-padding: 30;">
          <children>
             <!-- Welcome / Hero -->
             <!-- Welcome / Hero -->
              <Label fx:id="lblPerson" text="Welcome, Data Operator" styleClass="h2" StackPane.alignment="TOP_LEFT" visible="false"/>
          
             <!-- Dashboard Pane -->
             <VBox fx:id="dashboardPane" spacing="20" styleClass="dashboard-container">
                 <Label text="Overview" styleClass="h2"/>
                 <HBox spacing="20">
                     <VBox styleClass="metric-card" HBox.hgrow="ALWAYS">
                         <Label text="Total Vendors" styleClass="metric-title"/>
                         <Label fx:id="lblTotalVendors" text="0" styleClass="metric-value"/>
                         <Label text="Active partners" styleClass="metric-subtitle"/>
                     </VBox>
                     <VBox styleClass="metric-card" HBox.hgrow="ALWAYS">
                         <Label text="Total Products" styleClass="metric-title"/>
                         <Label fx:id="lblTotalProducts" text="0" styleClass="metric-value"/>
                         <Label text="In inventory" styleClass="metric-subtitle"/>
                     </VBox>
                     <VBox styleClass="metric-card" HBox.hgrow="ALWAYS">
                         <Label text="Low Stock Alerts" styleClass="metric-title"/>
                         <Label fx:id="lblLowStock" text="0" styleClass="metric-value" style="-fx-text-fill: #ef4444;"/>
                         <Label text="Items below threshold" styleClass="metric-subtitle"/>
                     </VBox>
                 </HBox>
                 
                 <!-- Low Stock Table Section -->
                 <VBox spacing="10" VBox.vgrow="ALWAYS">
                     <Label text="Low Stock Items" styleClass="h3"/>
                     <TableView fx:id="tblLowStock" VBox.vgrow="ALWAYS">
                        <columns>
                           <TableColumn fx:id="lsID" text="ID" prefWidth="50"/>
                           <TableColumn fx:id="lsName" text="Product Name" prefWidth="200"/>
                           <TableColumn fx:id="lsQty" text="Quantity" prefWidth="100"/>
                           <TableColumn fx:id="lsVendor" text="Vendor ID" prefWidth="100"/>
                        </columns>
                        <columnResizePolicy>
                           <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                     </TableView>
                 </VBox>
             </VBox>
          
             <!-- Add Vendor Pane -->
             <VBox fx:id="avPane" styleClass="card" visible="false" spacing="20" maxWidth="600" maxHeight="600">
                <Label text="Add New Vendor" styleClass="h2"/>
                
                <VBox spacing="5">
                    <Label text="Vendor Name" styleClass="text-secondary"/>
                    <TextField fx:id="tfAVName" promptText="Full name of the Vendor" />
                </VBox>
                
                <VBox spacing="5">
                    <Label text="Contact Person" styleClass="text-secondary"/>
                    <TextField fx:id="tfAVCPerson" promptText="Enter the main Contact Person Name" />
                </VBox>
                
                <HBox spacing="20">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="Contact Number" styleClass="text-secondary"/>
                        <TextField fx:id="tfAVContact" promptText="Enter Contact Person's Contact" />
                    </VBox>
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                         <Label text="Email" styleClass="text-secondary"/>
                         <TextField fx:id="tfAVEmail" promptText="Enter Vendor Email" />
                    </VBox>
                </HBox>
                
                <VBox spacing="5">
                    <Label text="Company Name" styleClass="text-secondary"/>
                    <TextField fx:id="tfAVCName" promptText="Enter Company Name" />
                </VBox>
 
                <VBox spacing="5">
                    <Label text="Registered Date" styleClass="text-secondary"/>
                    <JFXDatePicker fx:id="dpAVDate" maxWidth="Infinity" defaultColor="#2563eb" />
                </VBox>
                
                <JFXButton fx:id="btnAVSubmit" onAction="#addVendorToDatabase" text="Add Vendor" styleClass="btn-primary" prefWidth="200" style="-fx-alignment: center;"/>
             </VBox>
 
             <!-- View Vendors Pane -->
             <BorderPane fx:id="vvPane" visible="false" styleClass="card">
                <top>
                    <VBox spacing="15" style="-fx-padding: 0 0 20 0;">
                        <HBox alignment="CENTER_LEFT">
                             <VBox>
                                 <Label text="Vendor Directory" styleClass="h3"/>
                                 <Label text="Manage your supplier information." styleClass="text-secondary"/>
                             </VBox>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #f9fafb; -fx-padding: 10; -fx-background-radius: 5;">
                             <JFXComboBox fx:id="cmbVVSearchColumn" promptText="Search By" prefWidth="150" style="-fx-background-color: white;"/>
                             <TextField fx:id="tfVVSearchVal" promptText="Search term..." HBox.hgrow="ALWAYS" styleClass="input-field"/>
                             <JFXButton fx:id="btnVVSearch" onAction="#searchVendors" text="Search" styleClass="btn-primary" style="-fx-cursor: hand;"/>
                             <JFXButton fx:id="btnVVRemove" onAction="#removeVendor" text="Delete Vendor" styleClass="btn-danger" style="-fx-cursor: hand;"/>
                        </HBox>
                    </VBox>
                </top>
                <center>
                   <TableView fx:id="tblVendors">
                      <columns>
                         <TableColumn fx:id="vvID" text="ID" prefWidth="50" />
                         <TableColumn fx:id="vvName" text="Name" />
                         <TableColumn fx:id="vvContactPerson" text="Contact Person" />
                         <TableColumn fx:id="vvContact" text="Contact" />
                         <TableColumn fx:id="vvEmail" text="Email" />
                         <TableColumn fx:id="vvCompName" text="Company" />
                         <TableColumn fx:id="vvRegDate" text="Req Date" />
                      </columns>
                      <columnResizePolicy>
                         <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                      </columnResizePolicy>
                   </TableView>
                </center>
             </BorderPane>
             
             <!-- Add Product Pane -->
             <VBox fx:id="apPane" styleClass="card" visible="false" spacing="20" maxWidth="600" maxHeight="650">
                <Label text="Add New Product" styleClass="h2"/>
                
                <VBox spacing="5">
                    <Label text="Product Name" styleClass="text-secondary"/>
                    <TextField fx:id="tfAPName" promptText="Name of the Product" />
                </VBox>
                
                <HBox spacing="20">
                     <VBox spacing="5" HBox.hgrow="ALWAYS">
                         <Label text="Vendor" styleClass="text-secondary"/>
                         <JFXComboBox fx:id="cmbVendorID" maxWidth="Infinity"/>
                     </VBox>
                     <VBox spacing="5" HBox.hgrow="ALWAYS">
                         <Label text="Category" styleClass="text-secondary"/>
                         <TextField fx:id="tfAPCategory" promptText="Enter Product Category" />
                     </VBox>
                </HBox>
                
                <HBox spacing="20">
                     <VBox spacing="5" HBox.hgrow="ALWAYS">
                         <Label text="Original Price" styleClass="text-secondary"/>
                         <TextField fx:id="tfAPOPrice" promptText="0.0" />
                     </VBox>
                     <VBox spacing="5" HBox.hgrow="ALWAYS">
                         <Label text="Sale Price" styleClass="text-secondary"/>
                         <TextField fx:id="tfAPSPrice" promptText="0.0" />
                     </VBox>
                </HBox>
                
                 <HBox spacing="20">
                     <VBox spacing="5" HBox.hgrow="ALWAYS">
                         <Label text="Unit Price" styleClass="text-secondary"/>
                         <TextField fx:id="tfAPUPrice" promptText="0.0" />
                     </VBox>
                     <VBox spacing="5" HBox.hgrow="ALWAYS">
                         <Label text="Carton Price" styleClass="text-secondary"/>
                         <TextField fx:id="tfAPCPrice" promptText="0.0" />
                     </VBox>
                </HBox>
 
                <VBox spacing="5">
                    <Label text="Initial Quantity" styleClass="text-secondary"/>
                    <Spinner fx:id="sldAPQuantity" editable="true" maxWidth="Infinity"/>
                </VBox>
                
                <JFXButton fx:id="btnAPSubmit" onAction="#addProductToDatabase" text="Add Product" styleClass="btn-primary" prefWidth="200" style="-fx-alignment: center;"/>
             </VBox>
 
             <!-- View Products Pane -->
             <BorderPane fx:id="vpPane" visible="false" styleClass="card">
                <top>
                    <VBox spacing="15" style="-fx-padding: 0 0 20 0;">
                        <HBox alignment="CENTER_LEFT">
                             <VBox>
                                 <Label text="Product Inventory" styleClass="h3"/>
                                 <Label text="Manage catalog and stock levels." styleClass="text-secondary"/>
                             </VBox>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #f9fafb; -fx-padding: 10; -fx-background-radius: 5;">
                             <JFXComboBox fx:id="cmbVPSearchColumn" promptText="Search By" prefWidth="150" style="-fx-background-color: white;"/>
                             <TextField fx:id="tfVPSearchVal" promptText="Search term..." HBox.hgrow="ALWAYS" styleClass="input-field"/>
                             <JFXButton fx:id="btnVPSearch" onAction="#searchProducts" text="Search" styleClass="btn-primary" style="-fx-cursor: hand;"/>
                             <JFXButton fx:id="btnVPRemove" onAction="#removeProduct" text="Delete Product" styleClass="btn-danger" style="-fx-cursor: hand;"/>
                        </HBox>
                    </VBox>
                </top>
                <center>
                   <TableView fx:id="tblProducts">
                      <columns>
                         <TableColumn fx:id="vpID" text="ID" prefWidth="50" />
                         <TableColumn fx:id="vpName" text="Name" />
                         <TableColumn fx:id="vpVendorID" text="Vendor ID" />
                         <TableColumn fx:id="vpCategory" text="Category" />
                         <TableColumn fx:id="vpOrigPrice" text="Orig. Price" />
                         <TableColumn fx:id="vpSalePrice" text="Sale Price" />
                         <TableColumn fx:id="vpUnitPrice" text="Unit Price" />
                         <TableColumn fx:id="vpCartonPrice" text="Carton Price" />
                         <TableColumn fx:id="vpQuantity" text="Qty" />
                      </columns>
                      <columnResizePolicy>
                         <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                      </columnResizePolicy>
                   </TableView>
                </center>
             </BorderPane>
             
             <!-- Change Password Pane -->
             <VBox fx:id="cpPane" styleClass="card" visible="false" spacing="20" maxWidth="400" maxHeight="450">
                 <Label text="Change Password" styleClass="h2"/>
                 
                 <VBox spacing="5">
                      <Label text="Old Password" styleClass="text-secondary"/>
                      <PasswordField promptText="Enter Current Password" />
                 </VBox>
                 
                 <VBox spacing="5">
                      <Label text="New Password" styleClass="text-secondary"/>
                      <PasswordField promptText="Enter New Password" />
                 </VBox>
                 
                 <VBox spacing="5">
                      <Label text="Confirm Password" styleClass="text-secondary"/>
                      <PasswordField promptText="Re-enter New Password" />
                 </VBox>
                 
                 <JFXToggleButton fx:id="btnToggle" text="Show Passwords" />
                 <JFXButton text="Update Password" styleClass="btn-primary" maxWidth="Infinity"/>
             </VBox>
 
          </children>
       </StackPane>
    </center>
 </BorderPane>
